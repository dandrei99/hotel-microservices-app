# --- Identity & port ---
spring.application.name=RESERVATION-SERVICE
server.port=8083

# --- Service discovery & (optional) central config ---
eureka.client.service-url.defaultZone=http://service-registry:8761/eureka

# --- Database (MySQL container "reservation-db") ---
spring.datasource.url=jdbc:mysql://reservation-db:3306/reservation_db?createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=UTC
spring.datasource.username=${DB_USER:reservation}
spring.datasource.password=${DB_PASSWORD:reservationpass}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Paths to other microservices with Docker profile
gateway.base-url=http://api-gateway:9191
user.service.base-url=${gateway.base-url}/api/users/
room.service.base-url=${gateway.base-url}/api/rooms/
services.service.base-url=${gateway.base-url}/api/services/

# Use Flyway for schema; validate at boot
spring.jpa.hibernate.ddl-auto=validate
spring.flyway.enabled=true
spring.jpa.open-in-view=false

# --- Security/JWT (overridable via env) ---
jwt.secret=${JWT_SECRET:mySuperSuperSuperSecretKeyForJWTValidation}

# --- Logging ---
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=DEBUG

# --- Resilience4j circuit breakers ---
# Room Service circuit breaker (as provided)
resilience4j.circuitbreaker.instances.roomService.slidingWindowSize=5
resilience4j.circuitbreaker.instances.roomService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.roomService.waitDurationInOpenState=5s

# --- Actuator / misc ---
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true
